#pragma once

#ifndef RAZ_LUAWRAPPER_HPP
#define RAZ_LUAWRAPPER_HPP

#include <string>

namespace sol { class state; }

namespace Raz {

class FilePath;

class LuaWrapper {
  friend class LuaEnvironment;

public:
  static void registerTypes();
  /// Executes a script from a string.
  /// \param code Code to be executed.
  /// \return True if the script has been executed without errors, false otherwise.
  static bool execute(const std::string& code);
  /// Executes a script from a file.
  /// \param filePath Path to the script to be executed. Must be valid ASCII; special characters are not handled.
  /// \return True if the script has been executed without errors, false otherwise.
  static bool executeFromFile(const FilePath& filePath);
  /// Runs the garbage collector, releasing all unreferenced variables.
  static void collectGarbage();

private:
  static void registerAnimationTypes();
  static void registerAudioTypes();
  static void registerCoreTypes();
  static void registerDataTypes();
  static void registerEntityTypes();
  static void registerFileFormatTypes();
  static void registerImageTypes();
  static void registerMathTypes();
  static void registerMatrixTypes();
  static void registerMeshTypes();
  static void registerMeshRendererTypes();
  static void registerNetworkTypes();
  static void registerOverlayBaseTypes();
  static void registerOverlayWidgetTypes();
  static void registerPhysicsTypes();
  static void registerRenderTypes();
  static void registerRenderGraphTypes();
  static void registerRenderSystemTypes();
  static void registerShaderTypes();
  static void registerShaderProgramTypes();
  static void registerShapeTypes();
  static void registerTextureTypes();
  static void registerUtilsTypes();
  static void registerVectorTypes();
  static void registerWindowTypes();
  static void registerXrTypes();

  static sol::state& getState();
};

} // namespace Raz

#endif // RAZ_LUAWRAPPER_HPP
